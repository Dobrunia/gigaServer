<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Snippet Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = { darkMode: 'class' };
    </script>
    <style>
      :root {
        --bg: #0b0d12;
        --bg-elev: #111420;
        --text: #e6e9ef;
        --muted: #9aa3b2;
        --accent: #6ea8fe;
        --ok: #3cc36a;
        --warn: #f7b955;
        --crit: #ff6b6b;
        --border: #2a2f3a;
        --radius: 10px;
        --gap: 12px;
        --pad: 12px;
        --font-mono: ui-monospace, Consolas, monospace;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        background: var(--bg);
        color: var(--text);
        font: 14px/1.4 system-ui;
      }

      .card {
        background: var(--bg-elev);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: var(--pad);
      }

      .snippet-card {
        transition: all 0.2s ease;
        cursor: pointer;
        width: 350px;
        flex-shrink: 0;
      }

      .snippet-card:hover {
        /* transform: translateY(-2px); */
        border-color: var(--accent);
      }

      .code-preview {
        font-family: var(--font-mono);
        font-size: 12px;
        line-height: 1.4;
        max-height: 150px;
        overflow: auto; /* –µ–¥–∏–Ω—ã–π —Å–∫—Ä–æ–ª–ª –¥–ª—è –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ */
        background: #1a1a1a;
        border-radius: 6px;
        margin-top: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        -ms-overflow-style: none; /* IE/Edge —Å–∫—Ä—ã—Ç—å –ø–æ–ª–æ—Å—É */
        scrollbar-width: none; /* Firefox —Å–∫—Ä—ã—Ç—å –ø–æ–ª–æ—Å—É */
      }
      .code-preview::-webkit-scrollbar {
        width: 0;
        height: 0;
      }

      .code-preview-wrapper {
        display: flex;
        background: #1a1a1a;
        min-height: 100%;
        min-width: 100%;
        width: max-content;
      }

      .code-preview-numbers {
        background: #1a1a1a;
        color: #666;
        padding: 8px 6px 8px 8px;
        font-family: var(--font-mono);
        font-size: 12px;
        line-height: 1.4;
        user-select: none;
        border-right: 1px solid #333;
        min-width: 30px;
        text-align: right;
        flex-shrink: 0;
        white-space: pre;
      }

      .code-preview-content {
        flex: 1;
        padding: 8px 8px 8px 6px;
        font-family: var(--font-mono);
        font-size: 12px;
        line-height: 1.4;
        color: var(--text);
        white-space: pre-wrap;
        word-wrap: break-word;
        background: transparent !important;
        margin: 0;
      }

      .code-preview-content code {
        margin: 0;
        padding: 0;
        background: transparent !important;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
        display: block;
      }

      .code-line-number {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        min-height: 1.4em;
        font-family: var(--font-mono);
        font-size: 12px;
        line-height: 1.4;
        color: #666;
        user-select: none;
      }

      .code-line {
        display: flex;
        align-items: center;
        min-height: 1.4em;
        font-family: var(--font-mono);
        font-size: 12px;
        line-height: 1.4;
        color: var(--text);
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
      .code-modal-line-numbers .code-line-number {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        min-height: 1.5em;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        color: #666;
        user-select: none;
      }

      .code-modal-code-content .code-line {
        display: flex;
        align-items: center;
        min-height: 1.5em;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        color: var(--text);
      }

      .language-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        color: var(--text) !important; /* force readable text color */
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞ */
      .filter-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 6px;
        border: 1px solid var(--border);
        transition: all 0.2s ease;
        user-select: none;
        min-height: 32px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
      }

      .filter-checkbox:hover {
        background: rgba(110, 168, 254, 0.1);
      }

      .filter-checkbox input[type='checkbox'] {
        appearance: none;
        width: 16px;
        height: 16px;
        border: 2px solid var(--border);
        border-radius: 4px;
        background: var(--bg);
        cursor: pointer;
        position: relative;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .filter-checkbox input[type='checkbox']:checked {
        background: var(--accent);
        border-color: var(--accent);
      }

      .filter-checkbox input[type='checkbox']:checked::after {
        content: '‚úì';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 10px;
        font-weight: bold;
      }

      .filter-checkbox input[type='checkbox']:hover {
        border-color: var(--accent);
        transform: scale(1.05);
      }

      .filter-checkbox-label {
        font-size: 12px;
        font-weight: 500;
        white-space: nowrap;
        min-width: fit-content;
      }

      .filter-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 8px;
        min-height: 40px; /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
        align-items: flex-start;
      }

      .search-input {
        background: var(--bg-elev);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 8px 12px;
        color: var(--text);
        width: 100%;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--accent);
      }

      .btn {
        background: var(--accent);
        color: white;
        border: none;
        border-radius: var(--radius);
        padding: 8px 16px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .btn:hover {
        background: #5a9cfe;
        /* transform: translateY(-1px); */
      }

      .btn-secondary {
        background: var(--border);
        color: var(--text);
        border: none;
        border-radius: var(--radius);
        padding: 8px 16px;
      }

      .btn-secondary:hover {
        background: #3a3f4a;
      }

      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .modal-content {
        background: var(--bg-elev);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 24px;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
      }

      .form-group {
        margin-bottom: 16px;
      }

      .form-label {
        display: block;
        margin-bottom: 4px;
        font-weight: 500;
        color: var(--text);
      }

      .form-input {
        width: 100%;
        padding: 8px 12px;
        background: var(--bg);
        border: 1px solid var(--border);
        border-radius: 6px;
        color: var(--text);
        font-family: var(--font-mono);
      }

      .form-input:focus {
        outline: none;
        border-color: var(--accent);
      }

      .form-textarea {
        min-height: 200px;
        resize: vertical;
        background: #1a1a1a !important;
        border: 1px solid #333 !important;
      }

      .code-editor-container {
        display: flex;
        background: #1a1a1a;
        border: 1px solid #333;
        border-radius: 6px;
        overflow: hidden;
        min-height: 200px;
      }

      .code-editor-numbers {
        background: #1a1a1a;
        color: #666;
        padding: 8px 8px 8px 12px;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        user-select: none;
        border-right: 1px solid #333;
        min-width: 40px;
        text-align: right;
        flex-shrink: 0;
        white-space: pre;
      }

      .code-editor-textarea {
        flex: 1;
        background: #1a1a1a !important;
        border: none !important;
        padding: 8px 12px 8px 8px;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        color: var(--text);
        resize: none;
        outline: none;
        min-height: 184px;
      }

      .hidden {
        display: none;
      }

      .language-colors {
        --javascript: #f7df1e;
        --typescript: #3178c6;
        --python: #3776ab;
        --rust: #ce422b;
        --go: #00add8;
        --haskell: #5d4f85;
        --perl: #39457e;
        --ruby: #cc342d;
        --c: #00599c;
        --cpp: #00599c;
        --csharp: #239120;
        --java: #f89820;
        --php: #777bb4;
        --swift: #fa7343;
        --kotlin: #7f52ff;
        --scala: #dc322f;
        --clojure: #5881d8;
        --elixir: #4e2a8e;
        --erlang: #a90533;
        --lua: #000080;
        --r: #276dc3;
        --matlab: #e16737;
        --octave: #0790c0;
        --fortran: #734f96;
        --assembly: #6e4c13;
        --html: #e34f26;
        --css: #1572b6;
        --scss: #cf649a;
        --sass: #cf649a;
        --less: #1d365d;
        --json: #000000;
        --yaml: #cb171e;
        --xml: #ff6600;
        --sql: #336791;
        --bash: #4eaa25;
        --powershell: #012456;
        --dockerfile: #2496ed;
        --makefile: #427819;
        --cmake: #064f8c;
        --markdown: #083fa1;
        --latex: #008080;
        --tex: #008080;
        --default: #6ea8fe;
      }

      .lang-javascript {
        background: var(--javascript);
        color: #000;
      }
      .lang-typescript {
        background: var(--typescript);
        color: white;
      }
      .lang-python {
        background: var(--python);
        color: white;
      }
      .lang-rust {
        background: var(--rust);
        color: white;
      }
      .lang-go {
        background: var(--go);
        color: white;
      }
      .lang-haskell {
        background: var(--haskell);
        color: white;
      }
      .lang-perl {
        background: var(--perl);
        color: white;
      }
      .lang-html {
        background: var(--html);
        color: white;
      }
      .lang-css {
        background: var(--css);
        color: white;
      }
      .lang-json {
        background: var(--json);
        color: white;
      }
      .lang-sql {
        background: var(--sql);
        color: white;
      }
      .lang-bash {
        background: var(--bash);
        color: white;
      }
      .lang-ruby {
        background: var(--ruby);
        color: white;
      }
      .lang-c {
        background: var(--c);
        color: white;
      }
      .lang-cpp {
        background: var(--cpp);
        color: white;
      }
      .lang-csharp {
        background: var(--csharp);
        color: white;
      }
      .lang-java {
        background: var(--java);
        color: white;
      }
      .lang-php {
        background: var(--php);
        color: white;
      }
      .lang-swift {
        background: var(--swift);
        color: white;
      }
      .lang-kotlin {
        background: var(--kotlin);
        color: white;
      }
      .lang-scala {
        background: var(--scala);
        color: white;
      }
      .lang-clojure {
        background: var(--clojure);
        color: white;
      }
      .lang-elixir {
        background: var(--elixir);
        color: white;
      }
      .lang-erlang {
        background: var(--erlang);
        color: white;
      }
      .lang-lua {
        background: var(--lua);
        color: white;
      }
      .lang-r {
        background: var(--r);
        color: white;
      }
      .lang-matlab {
        background: var(--matlab);
        color: white;
      }
      .lang-octave {
        background: var(--octave);
        color: white;
      }
      .lang-fortran {
        background: var(--fortran);
        color: white;
      }
      .lang-assembly {
        background: var(--assembly);
        color: white;
      }
      .lang-scss {
        background: var(--scss);
        color: white;
      }
      .lang-sass {
        background: var(--sass);
        color: white;
      }
      .lang-less {
        background: var(--less);
        color: white;
      }
      .lang-yaml {
        background: var(--yaml);
        color: white;
      }
      .lang-xml {
        background: var(--xml);
        color: white;
      }
      .lang-powershell {
        background: var(--powershell);
        color: white;
      }
      .lang-dockerfile {
        background: var(--dockerfile);
        color: white;
      }
      .lang-makefile {
        background: var(--makefile);
        color: white;
      }
      .lang-cmake {
        background: var(--cmake);
        color: white;
      }
      .lang-markdown {
        background: var(--markdown);
        color: white;
      }
      .lang-latex {
        background: var(--latex);
        color: white;
      }
      .lang-tex {
        background: var(--tex);
        color: white;
      }
      .lang-default {
        background: var(--default);
        color: white;
      }

      /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–¥–∞ */
      .code-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
      }

      .code-modal-content {
        background: var(--bg-elev);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        width: 95%;
        max-width: 1200px;
        max-height: 90vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .code-modal-header {
        padding: 16px 20px;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--bg);
      }

      .code-modal-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
      }

      .code-modal-close {
        background: var(--border);
        color: var(--text);
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 16px;
      }

      .code-modal-close:hover {
        background: var(--crit);
        color: white;
      }

      .code-modal-body {
        flex: 1;
        overflow: auto;
        padding: 0;
      }

      .code-modal-code {
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        background: #0d1117;
        color: var(--text);
        padding: 20px;
        margin: 0;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-x: auto;
        min-height: 200px;
        display: block;
      }

      .code-modal-code-container {
        background: #1a1a1a;
        border-radius: 6px;
        overflow: auto;
        border: 1px solid #333;
        max-height: 60vh;
        position: relative;
      }

      .code-modal-code-wrapper {
        display: flex;
        background: #1a1a1a;
        min-height: 100%;
        min-width: 100%;
        width: max-content;
      }

      .code-modal-line-numbers {
        background: #1a1a1a;
        color: #666;
        padding: 20px 12px 20px 20px;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        user-select: none;
        border-right: 1px solid #333;
        min-width: 50px;
        text-align: right;
        flex-shrink: 0;
        white-space: pre;
      }

      .code-modal-code-content {
        flex: 1;
        padding: 20px 20px 20px 12px;
        font-family: var(--font-mono);
        font-size: 14px;
        line-height: 1.5;
        color: var(--text);
        white-space: pre-wrap;
        word-wrap: break-word;
        background: #1a1a1a;
        margin: 0;
        display: block;
      }

      .code-modal-actions {
        padding: 16px 20px;
        border-top: 1px solid var(--border);
        display: flex;
        gap: 12px;
        background: var(--bg);
      }

      .code-modal-btn {
        background: var(--accent);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 16px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .code-modal-btn:hover {
        background: #5a9cfe;
        transform: translateY(-1px);
      }

      .code-modal-btn-secondary {
        background: var(--border);
        color: var(--text);
      }

      .code-modal-btn-secondary:hover {
        background: #3a3f4a;
      }
    </style>
  </head>
  <body class="p-4">
    <header class="mb-6">
      <div class="flex items-center justify-between mb-4">
        <h1 class="text-2xl font-bold">üìù Snippet Manager</h1>
        <button id="addSnippetBtn" class="btn">+ –ù–æ–≤—ã–π —Å–Ω–∏–ø–µ—Ç</button>
        <a href="/navigation" class="text-sm text-[#6ea8fe] underline">Back</a>
      </div>

      <div class="card bg-transparent border-none">
        <div class="form-group">
          <label class="form-label">üîç –ü–æ–∏—Å–∫ —Å–Ω–∏–ø–µ—Ç–æ–≤</label>
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–Ω–∏–ø–µ—Ç–∞..."
          />
        </div>
      </div>
    </header>

    <div id="snippetsContainer" class="flex flex-wrap gap-4">
      <!-- –°–Ω–∏–ø–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–¥–∞ -->
    <div id="codeModal" class="code-modal hidden">
      <div class="code-modal-content">
        <div class="code-modal-header">
          <h3 id="codeModalTitle" class="code-modal-title">–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–¥–∞</h3>
          <button id="closeCodeModal" class="code-modal-close">‚úï</button>
        </div>
        <div class="code-modal-body">
          <div class="code-modal-code-container">
            <div class="code-modal-code-wrapper">
              <div id="codeModalLineNumbers" class="code-modal-line-numbers"></div>
              <div id="codeModalCode" class="code-modal-code-content"></div>
            </div>
          </div>
        </div>
        <div class="code-modal-actions">
          <button id="copyCodeBtn" class="btn-secondary text-xs">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–Ω–∏–ø–µ—Ç–∞ -->
    <div id="snippetModal" class="modal hidden">
      <div class="modal-content">
        <div class="flex items-center justify-between mb-4">
          <h2 id="modalTitle" class="text-xl font-bold">–ù–æ–≤—ã–π —Å–Ω–∏–ø–µ—Ç</h2>
          <button id="closeModal" class="btn-secondary">‚úï</button>
        </div>

        <form id="snippetForm">
          <div class="form-group">
            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input
              type="text"
              id="snippetName"
              class="form-input"
              placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–Ω–∏–ø–µ—Ç–∞"
              required
            />
          </div>

          <div class="form-group">
            <label class="form-label">–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</label>
            <select id="snippetLanguage" class="form-input">
              <option value="javascript">üü® JavaScript</option>
              <option value="typescript">üî∑ TypeScript</option>
              <option value="python">üêç Python</option>
              <option value="rust">ü¶Ä Rust</option>
              <option value="go">üêπ Go</option>
              <option value="haskell">üî∑ Haskell</option>
              <option value="perl">üê™ Perl</option>
              <option value="ruby">üíé Ruby</option>
              <option value="c">üîµ C</option>
              <option value="cpp">üîµ C++</option>
              <option value="csharp">üü£ C#</option>
              <option value="java">‚òï Java</option>
              <option value="php">üêò PHP</option>
              <option value="swift">ü¶â Swift</option>
              <option value="kotlin">üü† Kotlin</option>
              <option value="scala">üî¥ Scala</option>
              <option value="clojure">üü¢ Clojure</option>
              <option value="elixir">üíú Elixir</option>
              <option value="erlang">üü° Erlang</option>
              <option value="lua">üåô Lua</option>
              <option value="r">üìä R</option>
              <option value="matlab">üßÆ MATLAB</option>
              <option value="octave">üéµ Octave</option>
              <option value="fortran">üî¢ Fortran</option>
              <option value="assembly">‚öôÔ∏è Assembly</option>
              <option value="html">üåê HTML</option>
              <option value="css">üé® CSS</option>
              <option value="scss">üé® SCSS</option>
              <option value="sass">üé® Sass</option>
              <option value="less">üé® Less</option>
              <option value="json">üìÑ JSON</option>
              <option value="yaml">üìù YAML</option>
              <option value="xml">üìã XML</option>
              <option value="sql">üóÑÔ∏è SQL</option>
              <option value="bash">üêö Bash</option>
              <option value="powershell">üíª PowerShell</option>
              <option value="dockerfile">üê≥ Dockerfile</option>
              <option value="makefile">üîß Makefile</option>
              <option value="cmake">üîß CMake</option>
              <option value="markdown">üìù Markdown</option>
              <option value="latex">üìö LaTeX</option>
              <option value="tex">üìö TeX</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">–ö–æ–¥</label>
            <div class="code-editor-container">
              <div id="editorLineNumbers" class="code-editor-numbers">1</div>
              <textarea
                id="snippetCode"
                class="code-editor-textarea"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å–Ω–∏–ø–µ—Ç–∞..."
                required
              ></textarea>
            </div>
          </div>

          <div class="flex gap-3">
            <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="button" id="cancelBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // –ï–¥–∏–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤ (–¥–æ–±–∞–≤–ª—è–π/—É–¥–∞–ª—è–π –∑–¥–µ—Å—å)
      const SUPPORTED_LANGUAGES = new Set([
        'javascript',
        'typescript',
        'python',
        'rust',
        'go',
        'haskell',
        'perl',
        'ruby',
        'c',
        'cpp',
        'csharp',
        'java',
        'php',
        'swift',
        'kotlin',
        'scala',
        'clojure',
        'elixir',
        'erlang',
        'lua',
        'r',
        'matlab',
        'octave',
        'fortran',
        'assembly',
        'html',
        'css',
        'scss',
        'sass',
        'less',
        'json',
        'yaml',
        'xml',
        'sql',
        'bash',
        'powershell',
        'dockerfile',
        'makefile',
        'cmake',
        'markdown',
        'latex',
        'tex',
      ]);

      const LANG_LABELS = {
        javascript: 'JavaScript',
        typescript: 'TypeScript',
        python: 'Python',
        rust: 'Rust',
        go: 'Go',
        haskell: 'Haskell',
        perl: 'Perl',
        ruby: 'Ruby',
        c: 'C',
        cpp: 'C++',
        csharp: 'C#',
        java: 'Java',
        php: 'PHP',
        swift: 'Swift',
        kotlin: 'Kotlin',
        scala: 'Scala',
        clojure: 'Clojure',
        elixir: 'Elixir',
        erlang: 'Erlang',
        lua: 'Lua',
        r: 'R',
        matlab: 'MATLAB',
        octave: 'Octave',
        fortran: 'Fortran',
        assembly: 'Assembly',
        html: 'HTML',
        css: 'CSS',
        scss: 'SCSS',
        sass: 'Sass',
        less: 'Less',
        json: 'JSON',
        yaml: 'YAML',
        xml: 'XML',
        sql: 'SQL',
        bash: 'Bash',
        powershell: 'PowerShell',
        dockerfile: 'Dockerfile',
        makefile: 'Makefile',
        cmake: 'CMake',
        markdown: 'Markdown',
        latex: 'LaTeX',
        tex: 'TeX',
      };

      const LANG_EMOJIS = {
        javascript: 'üü®',
        typescript: 'üî∑',
        python: 'üêç',
        rust: 'ü¶Ä',
        go: 'üêπ',
        haskell: 'üî∑',
        perl: 'üê™',
        ruby: 'üíé',
        c: 'üîµ',
        cpp: 'üîµ',
        csharp: 'üü£',
        java: '‚òï',
        php: 'üêò',
        swift: 'ü¶â',
        kotlin: 'üü†',
        scala: 'üî¥',
        clojure: 'üü¢',
        elixir: 'üíú',
        erlang: 'üü°',
        lua: 'üåô',
        r: 'üìä',
        matlab: 'üßÆ',
        octave: 'üéµ',
        fortran: 'üî¢',
        assembly: '‚öôÔ∏è',
        html: 'üåê',
        css: 'üé®',
        scss: 'üé®',
        sass: 'üé®',
        less: 'üé®',
        json: 'üìÑ',
        yaml: 'üìù',
        xml: 'üìã',
        sql: 'üóÑÔ∏è',
        bash: 'üêö',
        powershell: 'üíª',
        dockerfile: 'üê≥',
        makefile: 'üîß',
        cmake: 'üîß',
        markdown: 'üìù',
        latex: 'üìö',
        tex: 'üìö',
      };

      function labelForLang(lang) {
        return LANG_LABELS[lang] || lang.charAt(0).toUpperCase() + lang.slice(1);
      }

      function emojiForLang(lang) {
        return LANG_EMOJIS[lang] || 'üìÑ';
      }

      class SnippetManager {
        constructor() {
          this.snippets = this.loadSnippets();
          this.currentSnippetId = null;
          this.activeLang = 'all';
          this.init();
        }

        init() {
          this.bindEvents();
          this.renderSnippets();
        }

        bindEvents() {
          // –ü–æ–∏—Å–∫
          document.getElementById('searchInput').addEventListener('input', (e) => {
            this.filterSnippets(e.target.value);
          });

          // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞/—Ñ–∏–ª—å—Ç—Ä –ø–æ —è–∑—ã–∫—É
          this.installLanguageFilter();

          // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
          document.getElementById('addSnippetBtn').addEventListener('click', () => {
            this.openModal();
          });

          document.getElementById('closeModal').addEventListener('click', () => {
            this.closeModal();
          });

          document.getElementById('cancelBtn').addEventListener('click', () => {
            this.closeModal();
          });

          // –§–æ—Ä–º–∞
          document.getElementById('snippetForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.saveSnippet();
          });

          // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
          document.getElementById('snippetModal').addEventListener('click', (e) => {
            if (e.target.id === 'snippetModal') {
              this.closeModal();
            }
          });

          // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–¥–∞
          document.getElementById('closeCodeModal').addEventListener('click', () => {
            this.closeCodeModal();
          });

          document.getElementById('copyCodeBtn').addEventListener('click', () => {
            this.copyCodeFromModal();
          });

          // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–¥–∞
          document.getElementById('codeModal').addEventListener('click', (e) => {
            if (e.target.id === 'codeModal') {
              this.closeCodeModal();
            }
          });

          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–æ–∫ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
          const codeTextarea = document.getElementById('snippetCode');
          codeTextarea.addEventListener('input', () => {
            this.updateEditorLineNumbers();
          });
          codeTextarea.addEventListener('scroll', () => {
            this.syncEditorScroll();
          });
        }

        loadSnippets() {
          this.fetchFromServer();
          return [];
        }

        async fetchFromServer() {
          try {
            const res = await fetch('/rust/snippets/list');
            const data = await res.json();
            this.snippets = Array.isArray(data.snippets) ? data.snippets : [];
            this.renderSnippets();
          } catch (e) {
            console.warn('Failed to load snippets:', e);
            this.snippets = [];
            this.renderSnippets();
          }
        }

        saveSnippets() {}

        filterSnippets(query) {
          const q = (query || '').toLowerCase();

          // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏
          const selectedLanguages = this.getSelectedLanguages();

          const filtered = this.snippets
            .filter((s) => {
              // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –≤—Å–µ —è–∑—ã–∫–∏ –∏–ª–∏ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤
              if (selectedLanguages.length === 0 || selectedLanguages.includes('all')) {
                return true;
              }
              // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–∞–º
              return selectedLanguages.includes(s.language.toLowerCase());
            })
            .filter(
              (snippet) =>
                snippet.name.toLowerCase().includes(q) || snippet.code.toLowerCase().includes(q)
            );
          this.renderSnippets(filtered);
        }

        getSelectedLanguages() {
          const allCheckbox = document.getElementById('lang-all');
          const langCheckboxes = document.querySelectorAll('.lang-checkbox[data-lang]');

          // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–í—Å–µ —è–∑—ã–∫–∏"
          if (allCheckbox && allCheckbox.checked) {
            return ['all'];
          }

          // –°–æ–±–∏—Ä–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏
          const selected = [];
          langCheckboxes.forEach((checkbox) => {
            if (checkbox.checked) {
              selected.push(checkbox.dataset.lang);
            }
          });

          return selected;
        }

        installLanguageFilter() {
          const container = document.querySelector('header .card');
          if (!container) return;
          const row = document.createElement('div');
          row.className = 'form-group';

          // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
          const checkboxesContainer = document.createElement('div');
          checkboxesContainer.className = 'filter-container';

          // –°–æ–∑–¥–∞–µ–º —á–µ–∫–±–æ–∫—Å "–í—Å–µ —è–∑—ã–∫–∏"
          const allCheckbox = document.createElement('label');
          allCheckbox.className = 'filter-checkbox';
          allCheckbox.innerHTML = `
            <input type="checkbox" id="lang-all" class="lang-checkbox" checked>
            <span class="filter-checkbox-label">–í—Å–µ —è–∑—ã–∫–∏</span>
          `;

          // –°–æ–∑–¥–∞–µ–º —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
          const languageCheckboxes = Array.from(SUPPORTED_LANGUAGES).map((lang) => {
            const checkbox = document.createElement('label');
            checkbox.className = 'filter-checkbox';
            checkbox.innerHTML = `
              <input type="checkbox" id="lang-${lang}" class="lang-checkbox" data-lang="${lang}">
              <span class="filter-checkbox-label language-badge lang-${lang}">${labelForLang(
              lang
            )}</span>
            `;
            return checkbox;
          });

          checkboxesContainer.appendChild(allCheckbox);
          languageCheckboxes.forEach((checkbox) => checkboxesContainer.appendChild(checkbox));

          row.innerHTML = `
            <label class="form-label">üß† –§–∏–ª—å—Ç—Ä –ø–æ —è–∑—ã–∫—É</label>
          `;
          row.appendChild(checkboxesContainer);
          container.appendChild(row);

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤
          const allCheckboxInput = allCheckbox.querySelector('#lang-all');
          const langCheckboxes = row.querySelectorAll('.lang-checkbox[data-lang]');

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è "–í—Å–µ —è–∑—ã–∫–∏"
          allCheckboxInput.addEventListener('change', (e) => {
            if (e.target.checked) {
              // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–í—Å–µ —è–∑—ã–∫–∏", —Å–Ω–∏–º–∞–µ–º –≤—ã–±–æ—Ä —Å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
              langCheckboxes.forEach((cb) => (cb.checked = false));
            }
            this.filterSnippets(document.getElementById('searchInput').value);
          });

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —è–∑—ã–∫–æ–≤—ã—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
          langCheckboxes.forEach((checkbox) => {
            checkbox.addEventListener('change', (e) => {
              if (e.target.checked) {
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —è–∑—ã–∫, —Å–Ω–∏–º–∞–µ–º "–í—Å–µ —è–∑—ã–∫–∏"
                allCheckboxInput.checked = false;
              } else {
                // –ï—Å–ª–∏ —Å–Ω—è–ª–∏ –≤—Å–µ —è–∑—ã–∫–∏, –≤—ã–±–∏—Ä–∞–µ–º "–í—Å–µ —è–∑—ã–∫–∏"
                const anyChecked = Array.from(langCheckboxes).some((cb) => cb.checked);
                if (!anyChecked) {
                  allCheckboxInput.checked = true;
                }
              }
              this.filterSnippets(document.getElementById('searchInput').value);
            });
          });
        }

        renderSnippets(snippets = this.snippets) {
          const container = document.getElementById('snippetsContainer');

          if (snippets.length === 0) {
            container.innerHTML = `
                        <div class="card text-center text-muted">
                            <p>–°–Ω–∏–ø–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        </div>
                    `;
            return;
          }

          container.innerHTML = snippets
            .map(
              (snippet) => `
                    <div class="card snippet-card" data-id="${snippet.id}">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-lg font-semibold">${snippet.name}</h3>
                            <span class="language-badge lang-${snippet.language}">
                              ${emojiForLang(snippet.language)} ${labelForLang(snippet.language)}
                            </span>
                        </div>
                        <div class="code-preview" onclick="snippetManager.viewCode(${
                          snippet.id
                        })" onscroll="snippetManager.syncPreviewScroll(event)" title="–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">
                          <div class="code-preview-wrapper">
                            <div class="code-preview-numbers">${this.generateLineNumbersHTML(
                              snippet.code
                            )}</div>
                            <div class="code-preview-content">${this.generateCodeLinesHTML(
                              snippet.code,
                              snippet.language
                            )}</div>
                          </div>
                        </div>
                        <div class="flex gap-2 mt-3">
                            <button class="btn-secondary text-xs" onclick="snippetManager.editSnippet(${
                              snippet.id
                            })">
                                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                            <button class="btn-secondary text-xs" onclick="snippetManager.copySnippet(${
                              snippet.id
                            }, event)">
                                üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                            <button class="btn-secondary text-xs" onclick="snippetManager.deleteSnippet(${
                              snippet.id
                            })">
                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                            </button>
                        </div>
                    </div>
                `
            )
            .join('');

          // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
          if (typeof Prism !== 'undefined') {
            Prism.highlightAll();
          }

          // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
          setTimeout(() => {
            if (typeof Prism !== 'undefined') {
              // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–æ–¥ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
              const codeLines = container.querySelectorAll('.code-line span[class*="language-"]');
              codeLines.forEach((line) => {
                if (line.textContent.trim()) {
                  Prism.highlightElement(line);
                }
              });
            }
          }, 100);
        }

        openModal(snippetId = null) {
          this.currentSnippetId = snippetId;
          const modal = document.getElementById('snippetModal');
          const title = document.getElementById('modalTitle');
          const form = document.getElementById('snippetForm');

          if (snippetId) {
            const snippet = this.snippets.find((s) => s.id === snippetId);
            title.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–∏–ø–µ—Ç';
            document.getElementById('snippetName').value = snippet.name;
            document.getElementById('snippetLanguage').value = snippet.language;
            document.getElementById('snippetCode').value = snippet.code;
          } else {
            title.textContent = '–ù–æ–≤—ã–π —Å–Ω–∏–ø–µ—Ç';
            form.reset();
          }

          modal.classList.remove('hidden');
          document.getElementById('snippetName').focus();

          // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
          setTimeout(() => {
            this.updateEditorLineNumbers();
          }, 100);
        }

        closeModal() {
          document.getElementById('snippetModal').classList.add('hidden');
          this.currentSnippetId = null;
        }

        saveSnippet() {
          const name = document.getElementById('snippetName').value;
          const language = document.getElementById('snippetLanguage').value;
          const code = document.getElementById('snippetCode').value;

          if (!name || !code) return;

          fetch('/rust/snippets/save', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id: this.currentSnippetId, name, language, code }),
          })
            .then((r) => r.json())
            .then((res) => {
              if (res.ok) {
                this.fetchFromServer();
                this.closeModal();
              } else {
                alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + (res.error || 'unknown'));
              }
            })
            .catch((e) => alert('–û—à–∏–±–∫–∞: ' + e));
        }

        editSnippet(id) {
          this.openModal(id);
        }

        copySnippet(id, event) {
          const snippet = this.snippets.find((s) => s.id === id);
          navigator.clipboard.writeText(snippet.code).then(() => {
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
            btn.style.background = 'var(--ok)';
            btn.style.color = 'white';
            setTimeout(() => {
              btn.textContent = originalText;
              btn.style.background = '';
              btn.style.color = '';
            }, 2000);
          });
        }

        deleteSnippet(id) {
          if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Å–Ω–∏–ø–µ—Ç?')) return;
          fetch('/rust/snippets/delete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ id }),
          })
            .then((r) => r.json())
            .then((res) => {
              if (res.ok) this.fetchFromServer();
              else alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ' + (res.error || 'unknown'));
            })
            .catch((e) => alert('–û—à–∏–±–∫–∞: ' + e));
        }

        viewCode(id) {
          const snippet = this.snippets.find((s) => s.id === id);
          if (!snippet) {
            console.error('Snippet not found:', id);
            return;
          }

          console.log('Opening code modal for snippet:', snippet);

          const modal = document.getElementById('codeModal');
          const title = document.getElementById('codeModalTitle');
          const codeElement = document.getElementById('codeModalCode');

          if (!modal || !title || !codeElement) {
            console.error('Modal elements not found');
            return;
          }

          title.innerHTML = `${snippet.name} <span class="language-badge lang-${
            snippet.language
          }">${emojiForLang(snippet.language)} ${labelForLang(snippet.language)}</span>`;

          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ –∏ –∫–æ–¥ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
          const lineNumbersElement = document.getElementById('codeModalLineNumbers');

          lineNumbersElement.innerHTML = this.generateLineNumbersHTML(snippet.code);
          codeElement.innerHTML = this.generateCodeLinesHTML(snippet.code, snippet.language);

          modal.classList.remove('hidden');
          document.body.style.overflow = 'hidden';

          // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
          setTimeout(() => {
            if (typeof Prism !== 'undefined') {
              // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
              const codeLines = codeElement.querySelectorAll('.code-line span[class*="language-"]');
              codeLines.forEach((line) => {
                if (line.textContent.trim()) {
                  Prism.highlightElement(line);
                }
              });
            }
          }, 100);
        }

        closeCodeModal() {
          const modal = document.getElementById('codeModal');
          modal.classList.add('hidden');
          document.body.style.overflow = '';
        }

        copyCodeFromModal() {
          const codeElement = document.getElementById('codeModalCode');
          const code = codeElement.textContent;

          navigator.clipboard.writeText(code).then(() => {
            const btn = document.getElementById('copyCodeBtn');
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
            btn.style.background = 'var(--ok)';
            btn.style.color = 'white';
            setTimeout(() => {
              btn.textContent = originalText;
              btn.style.background = '';
              btn.style.color = '';
            }, 2000);
          });
        }

        generateLineNumbers(code, maxLines = 10) {
          const lines = code.split('\n');
          const visibleLines = lines.slice(0, maxLines);
          return visibleLines.map((_, index) => index + 1).join('\n');
        }

        generateAllLineNumbers(code) {
          const lines = code.split('\n');
          return lines.map((_, index) => index + 1).join('\n');
        }

        generateLineNumbersHTML(code) {
          const lines = code.split('\n');
          return lines
            .map((_, index) => `<div class="code-line-number"><span>${index + 1}</span></div>`)
            .join('');
        }

        generateCodeLinesHTML(code, language) {
          const lines = code.split('\n');
          return lines
            .map(
              (line) =>
                `<div class="code-line"><span class="language-${language}">${this.escapeHtml(
                  line
                )}</span></div>`
            )
            .join('');
        }

        truncateCode(code, maxLines = 10) {
          const lines = code.split('\n');
          if (lines.length <= maxLines) {
            return code;
          }
          return lines.slice(0, maxLines).join('\n') + '\n...';
        }

        updateEditorLineNumbers() {
          const textarea = document.getElementById('snippetCode');
          const lineNumbers = document.getElementById('editorLineNumbers');

          if (!textarea || !lineNumbers) return;

          const lines = textarea.value.split('\n');
          const numbers = lines.map((_, index) => index + 1).join('\n');
          lineNumbers.textContent = numbers;
        }

        syncEditorScroll() {
          const textarea = document.getElementById('snippetCode');
          const lineNumbers = document.getElementById('editorLineNumbers');

          if (!textarea || !lineNumbers) return;

          lineNumbers.scrollTop = textarea.scrollTop;
        }

        syncPreviewScroll(e) {
          const container = e.currentTarget;
          const numbers = container.querySelector('.code-preview-numbers');
          const content = container.querySelector('.code-preview-content');

          if (!numbers || !content) return;

          // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª
          numbers.scrollTop = container.scrollTop;
          content.scrollTop = container.scrollTop;
        }

        escapeHtml(text) {
          const div = document.createElement('div');
          div.textContent = text;
          return div.innerHTML;
        }
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      const snippetManager = new SnippetManager();
    </script>
  </body>
</html>
