# SOCKS5 Proxy Server

Простой SOCKS5 прокси-сервер с аутентификацией для доступа к любым сайтам (YouTube, и т.д.).

## Установка

```bash
pnpm install
```

## Конфигурация

Скопируйте `.env.example` в `.env` и настройте:

```bash
cp .env.example .env
```

Отредактируйте `.env`:

- `PORT` - порт прокси (по умолчанию 1080)
- `TOKEN1` - токен первого пользователя (удобно для телефона и компа)
- Можно добавить больше токенов: `TOKEN2`, `TOKEN3`, и т.д.
- `LOG_CONNECTIONS` - включить логирование подключений (true/false)

**Пример:**

```env
PORT=1080
TOKEN1=my-secret-token-12345
TOKEN2=another-token-for-friend
LOG_CONNECTIONS=true
```

## Запуск

```bash
pnpm start
```

Сервер запустится на указанном порту (по умолчанию 1080).

## Использование

### Настройка в браузере

**Chrome/Edge:**

1. Установите расширение Proxy SwitchyOmega или используйте системные настройки
2. Тип прокси: SOCKS5
3. Сервер: `localhost` (или IP сервера)
4. Порт: `1080` (или из конфига)
5. Логин: `<ваш-токен>` (например, `my-secret-token-12345`)
6. Пароль: можно оставить пустым или любое значение

**Firefox:**

1. Настройки → Сеть → Настройки прокси
2. Выберите "Ручная настройка прокси"
3. SOCKS5 хост: `localhost`
4. Порт: `1080`
5. Логин: `<ваш-токен>` (например, `my-secret-token-12345`)
6. Пароль: можно оставить пустым

### Настройка в приложениях

**curl:**

```bash
curl --socks5-hostname ваш-токен:@localhost:1080 https://www.youtube.com
```

Или с любым паролем (пароль игнорируется):

```bash
curl --socks5-hostname ваш-токен:любой@localhost:1080 https://www.youtube.com
```

**Telegram:**

1. Настройки → Дополнительно → Прокси-серверы
2. Добавить прокси → SOCKS5
3. Хост: `localhost`, Порт: `1080`
4. Логин: `<ваш-токен>` (например, `my-secret-token-12345`)
5. Пароль: можно оставить пустым

**Node.js:**

```javascript
const { SocksClient } = require('socks');
const https = require('https');

const options = {
  proxy: {
    host: 'localhost',
    port: 1080,
    type: 5,
    userId: 'your-token-here', // ваш токен
    password: '', // можно пустой
  },
  command: 'connect',
  destination: {
    host: 'www.youtube.com',
    port: 443,
  },
};

SocksClient.createConnection(options, (err, socket) => {
  if (err) {
    console.error(err);
    return;
  }
  // Используй socket для HTTPS запросов
});
```

## Особенности

- SOCKS5 протокол (стандартный)
- Аутентификация по токенам (удобно для телефона и компа)
- Поддержка нескольких токенов
- **Строгая защита:** только авторизованные токены могут подключиться
- **Логирование попыток доступа:** все неавторизованные попытки логируются
- Логирование подключений (опционально)
- Простая конфигурация через .env

## Безопасность

- ✅ **Только авторизованные токены могут подключиться** - все попытки доступа без валидного токена блокируются
- ✅ **Логирование попыток доступа** - все неавторизованные попытки логируются для мониторинга
- ⚠️ **Важно:** Этот прокси не шифрует трафик между клиентом и прокси-сервером. Для безопасности используйте VPN или SSH туннель.

Для локального использования (localhost) это безопасно, но для удаленного доступа рекомендуется использовать дополнительное шифрование.

**Рекомендации:**

- Используйте длинные случайные токены (минимум 20 символов)
- Не передавайте токены в открытом виде
- Регулярно проверяйте логи на подозрительную активность
