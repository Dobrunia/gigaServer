.PHONY: help start start-tmux stop clean

# –¶–≤–µ—Ç–∞
BLUE := \033[0;34m
GREEN := \033[0;32m
YELLOW := \033[1;33m
NC := \033[0m

help: ## –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
	@echo "$(BLUE)üöÄ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:$(NC)"
	@echo ""
	@echo "$(YELLOW)–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤:$(NC)"
	@echo "  make start      - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö"
	@echo "  make start-tmux - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ tmux"
	@echo ""
	@echo "$(YELLOW)–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:$(NC)"
	@echo "  make stop       - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å tmux —Å–µ—Å—Å–∏—é"
	@echo "  make clean      - –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"
	@echo ""
	@echo "$(YELLOW)–û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã:$(NC)"
	@echo "  make perl       - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Perl —Å–µ—Ä–≤–µ—Ä"
	@echo "  make rust       - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Rust —Å–µ—Ä–≤–µ—Ä"
	@echo "  make go         - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Go —Å–µ—Ä–≤–µ—Ä"

start: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
	@echo "$(BLUE)üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤...$(NC)"
	@./start_servers.sh

start-tmux: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ tmux
	@echo "$(BLUE)üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ tmux...$(NC)"
	@./start_servers_tmux.sh

stop: ## –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å tmux —Å–µ—Å—Å–∏—é
	@echo "$(YELLOW)üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ tmux —Å–µ—Å—Å–∏–∏...$(NC)"
	@tmux kill-session -t servers 2>/dev/null || echo "–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

clean: ## –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
	@echo "$(YELLOW)üßπ –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...$(NC)"
	@rm -f /tmp/start_*.sh

perl: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Perl —Å–µ—Ä–≤–µ—Ä
	@echo "$(BLUE)üê™ –ó–∞–ø—É—Å–∫ Perl —Å–µ—Ä–≤–µ—Ä–∞...$(NC)"
	@cd servers/perl-mojolicious && perl app.pl

rust: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Rust —Å–µ—Ä–≤–µ—Ä
	@echo "$(BLUE)ü¶Ä –ó–∞–ø—É—Å–∫ Rust —Å–µ—Ä–≤–µ—Ä–∞...$(NC)"
	@cd servers/rust && cargo run

go: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Go —Å–µ—Ä–≤–µ—Ä
	@echo "$(BLUE)üêπ –ó–∞–ø—É—Å–∫ Go —Å–µ—Ä–≤–µ—Ä–∞...$(NC)"
	@cd servers/go && go run .
